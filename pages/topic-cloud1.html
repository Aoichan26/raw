<!DOCTYPE html>
<html>
<head>
<title>主题详解 - News-sentiment</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<link href="../layout/styles/layout.css" rel="stylesheet" type="text/css" media="all">
<!-- 引入Highcharts库和词云插件 -->
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/wordcloud.js"></script>
</head>
<body id="top">
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<div class="wrapper row1">
  <header id="header" class="hoc clear"> 
    <!-- ################################################################################################ -->
    <div id="logo">
      <h1><a href="../index.html">News-sentiment</a></h1>
    </div>
    <!-- ################################################################################################ -->
  </header>
</div>
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<div class="wrapper row2">
  <nav id="mainav" class="hoc clear"> 
    <!-- ################################################################################################ -->
    <ul class="clear">
      <li><a href="../index.html">关于</a></li>
      <li class="active"><a class="drop" href="#">新闻舆情</a>
        <ul>
          <li class="active"><a href="sidebar-left.html">主题详解</a></li>
          <li><a href="full-width.html">数据下载</a></li>
        </ul>
      </li>
    </ul>
    <!-- ################################################################################################ -->
  </nav>
</div>
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<div class="wrapper overlay bgded" style="background-image:url('../images/demo/backgrounds/01.png')">
  <div id="breadcrumb" class="hoc clear"> 
    <!-- ################################################################################################ -->
    <ul>
      <li><a href="#">主页</a></li>
      <li><a href="#">新闻舆情</a></li>
      <li><a href="#">主题详解</a></li>
      <li><a href="#">政府职能</a></li>
    </ul>
    <!-- ################################################################################################ -->
  </div>
</div>
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<div class="wrapper row3">
  <main class="container hoc clear"> 
    <!-- main body -->
    <!-- ################################################################################################ -->
    <div class="sidebar one_quarter first"> 
      <!-- ################################################################################################ -->
      <h6>新闻分类</h6>
      <div class="accordion-menu">
          <!-- Nav1 -->
          <div class="menu-item">
              <div class="menu-title" data-target="#nav1"><span class="menu-icon">&#9654;</span>政策</div>
              <div class="sub-menu" id="nav1">
                  <div class="menu-item">
                      <div class="menu-title" data-target="#item1"><span class="menu-icon">&#9654;</span>经济政策</div>
                      <div class="sub-menu" id="item1">
                          <div class="menu-item">
                              <div class="menu-title" data-target="#option1"><span class="menu-icon">&#9654;</span>政策热点</div>
                              <div class="sub-menu" id="option1">
                                  <a href="detail-1.html" class="menu-item">详情</a>
                              </div>
                          </div>
                          <div class="menu-item">
                              <div class="menu-title" data-target="#option2"><span class="menu-icon">&#9654;</span>经济调控</div>
                              <div class="sub-menu" id="option2">
                                  <a href="detail-政府职能.html" class="menu-item">政府职能</a>
                                  <a href="detail-宏观经济.html" class="menu-item">宏观经济</a>
                              </div>
                          </div>
                      </div>
                  </div>
                  <div class="menu-item">
                      <div class="menu-title" data-target="#item2"><span class="menu-icon">&#9654;</span>民生</div>
                      <div class="sub-menu" id="item2">
                          <div class="menu-item">
                              <div class="menu-title" data-target="#option3"><span class="menu-icon">&#9654;</span>抗疫物资</div>
                              <div class="sub-menu" id="option3">
                                  <a href="detail-抗疫物资详情.html" class="menu-item">详情</a>
                              </div>
                          </div>
                          <div class="menu-item">
                              <div class="menu-title" data-target="#option4"><span class="menu-icon">&#9654;</span>民生科技</div>
                              <div class="sub-menu" id="option4">
                                  <a href="detail-智能科技.html" class="menu-item">智能科技</a>
                                  <a href="detail-新时代民生.html" class="menu-item">新时代民生</a>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
          <!-- Nav2 -->
          <div class="menu-item">
              <div class="menu-title" data-target="#nav2"><span class="menu-icon">&#9654;</span>经济</div>
              <div class="sub-menu" id="nav2">
                  <div class="menu-item">
                      <div class="menu-title" data-target="#item3"><span class="menu-icon">&#9654;</span>股东决策</div>
                      <div class="sub-menu" id="item3">
                          <a href="detail-股东决策详情.html" class="menu-item">详情</a>
                      </div>
                  </div>
                  <div class="menu-item">
                      <div class="menu-title" data-target="#item4"><span class="menu-icon">&#9654;</span>国家经济</div>
                      <div class="sub-menu" id="item4">
                          <div class="menu-item">
                              <div class="menu-title" data-target="#option5"><span class="menu-icon">&#9654;</span>国内外调控</div>
                              <div class="sub-menu" id="option5">
                                  <a href="detail-宏观政策.html" class="menu-item">宏观政策</a>
                                  <a href="detail-国有资本对外投资.html" class="menu-item">国有资本对外投资</a>
                              </div>
                          </div>
                          <div class="menu-item">
                              <div class="menu-title" data-target="#option6"><span class="menu-icon">&#9654;</span>金融市场</div>
                              <div class="sub-menu" id="option6">
                                  <a href="detail-货币权益市场.html" class="menu-item">货币/权益市场</a>
                                  <a href="detail-公司治理.html" class="menu-item">公司治理</a>
                              </div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
      <!-- ################################################################################################ -->
    </div>
    <!-- ################################################################################################ -->
    <!-- ################################################################################################ -->
    <div class="content three_quarter"> 
      <!-- ################################################################################################ -->
      <h1>白酒行业</h1>
      <p>10月29日，2022年</p>
      <div id="chart-container" style="height: 400px; min-width: 310px"></div>
      <!-- 新增词云图容器 -->
      <div id="word-cloud" style="min-width: 310px; margin-top: 20px;"></div>
    <!-- ################################################################################################ -->
    <!-- ################################################################################################ -->
    <!-- / main body -->
    <div class="clear"></div>
  </main>
</div>
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<div class="wrapper row4">
  <footer id="footer" class="hoc clear"> 
    <!-- ################################################################################################ -->
    <div class="one_third first">
      <h6 class="title">Address</h6>
      <p>7-276, Lau Ming Wai Bldg, 83 Tat Chee Ave, Hong Kong</p>
    </div>
    <div class="one_third">
      <h6 class="title">Contact</h6>
      <p>gavin.feng@cityu.edu.hk</p>
    </div>
    <div class="one_third">
      <h6 class="title">Quick Links</h6>
      <article>
        <h2 class="nospace font-x1"><a href="https://quantactix.com/">Quantactix Lab</a></h2>
      </article>
    </div>
    <!-- ################################################################################################ -->
  </footer>
</div>
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<div class="wrapper row5">
  <div id="copyright" class="hoc clear"> 
    <!-- ################################################################################################ -->
    <p class="fl_left">Copyright &copy; 2023 - All Rights Reserved - <a href="#">Domain Name</a></p>
    <!-- ################################################################################################ -->
  </div>
</div>
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<!-- ################################################################################################ -->
<a id="backtotop" href="#top"><i class="fa fa-chevron-up"></i></a>
<!-- JAVASCRIPTS -->
<script src="../layout/scripts/jquery.min.js"></script>
<script src="../layout/scripts/jquery.backtotop.js"></script>
<script src="../layout/scripts/jquery.mobilemenu.js"></script>
<!-- IE9 Placeholder Support -->
<script src="../layout/scripts/jquery.placeholder.min.js"></script>
<!-- / IE9 Placeholder Support -->
<!-- Custom Script for Dropdown Menu1 -->
<script src="../layout/scripts/dropdown.js"></script>
<!-- Highcharts图表代码 -->
<script>
  $(document).ready(function() {
    $.get('基金投资-test.csv', function(data) {
      var lines = data.split('\n');
      var topicHeatRatio = [];
      var upperConfidence = [];
      var lowerConfidence = [];
      var topicHeatForecast = [];
      var upperPrediction = [];
      var lowerPrediction = [];

      for (var i = 1; i < lines.length; i++) { // Skip the header
        var items = lines[i].split(',');
        if (items.length === 7) {
          var date = Date.parse(items[0].replace(/\//g, '-')); // Convert date to timestamp
          topicHeatRatio.push([date, parseFloat(items[1])]);
          upperConfidence.push([date, parseFloat(items[2])]);
          lowerConfidence.push([date, parseFloat(items[3])]);
          topicHeatForecast.push([date, parseFloat(items[4])]);
          upperPrediction.push([date, parseFloat(items[5])]);
          lowerPrediction.push([date, parseFloat(items[6])]);
        }
      }

      Highcharts.stockChart('chart-container', {
        rangeSelector: {
          selected: 1
        },
        title: {
          text: '话题热度占比与预测'
        },
        xAxis: {
          type: 'datetime'
        },
        yAxis: {
          title: {
            text: '百分比（%）'
          }
        },
        tooltip: {
          xDateFormat: '%B %e, %Y', // "February 4, 2022" 的格式
          split: true
        },
        series: [{
          name: '话题热度占比',
          data: topicHeatRatio
        }, {
          name: '95%置信区间上界',
          data: upperConfidence
        }, {
          name: '95%置信区间下界',
          data: lowerConfidence
        }, {
          name: '话题热度占比预测',
          data: topicHeatForecast
        }, {
          name: '预测区间上界',
          data: upperPrediction
        }, {
          name: '预测区间下界',
          data: lowerPrediction
        }]
      });
    });

   // 使用Highcharts生成词云图
    $.get('餐饮市场_word_cloud.csv', function(data) {
      var lines = data.split('\n');
      var words = [];

      for (var i = 1; i < lines.length; i++) { // Skip the header
        var items = lines[i].split(',');
        if (items.length === 3) { // 3 columns: index, word, weight
          words.push({name: items[1], weight: parseFloat(items[2])});
        }
      }

      Highcharts.chart('word-cloud', {
        chart: {
          height: 400,  // 调整图表高度
          width: 600    // 调整图表宽度
        },
        series: [{
          type: 'wordcloud',
          data: words,
          name: 'Weight',
          minFontSize: 14, // 调整最小字体大小
          maxFontSize: 50, // 调整最大字体大小
          rotation: {
            from: 0,
            to: 0  // 禁用旋转，使词更紧凑
          },
          placementStrategy: 'center'
        }],
        title: {
          text: '词云图'
        },
        tooltip: {
          formatter: function() {
            return '<b>' + this.point.name + '</b><br>权重: <b>' + this.point.weight + '</b>';
          }
        },
        plotOptions: {
          wordcloud: {
            style: {
              fontFamily: 'Noto Sans SC'
            }
          }
        }
      });
    });
  });
</script>
</body>
</html>
